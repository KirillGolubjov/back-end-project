{"mappings":";;;;;ACAA,kBAAkB,GAEX,MAAM,4CAAa,CAAC;IACzB,SAAS,cACP;IAEF,IAAI,MAAM,IAAI,SAAS,IAAI;QACzB,WAAW;QACX,OAAO;QACP,YAAY;IAId;IAEA,MAAM,SAAS,IAAI,SAAS;IAE5B,UAAU,QAAQ,CAAC;QACjB,gBAAgB;QAChB,MAAM,KAAK,SAAS,cAAc;QAClC,GAAG,YAAY;QAEf,aAAa;QACb,IAAI,SAAS,OAAO;YAClB,SAAS;YACT,QAAQ;QACV,GACG,UAAU,IAAI,aACd,MAAM;QAET,YAAY;QACZ,IAAI,SAAS,MAAM;YACjB,QAAQ;QACV,GACG,UAAU,IAAI,aACd,QAAQ,CAAC,OAAO,EAAE,IAAI,IAAI,EAAE,EAAE,IAAI,YAAY,IAAI,CAAC,EACnD,MAAM;QAET,gDAAgD;QAChD,OAAO,OAAO,IAAI;IACpB;IAEA,IAAI,UAAU,QAAQ;QACpB,SAAS;YACP,KAAK;YACL,QAAQ;YACR,MAAM;YACN,OAAO;QACT;IACF;AACF;;ADlDA,kBAAkB;AEAlB,kBAAkB;ACAlB,kBAAkB,GACX,MAAM,4CAAY;IACvB,MAAM,KAAK,SAAS,cAAc;IAClC,IAAI,IAAI,GAAG,cAAc,YAAY;AACvC;AAGO,MAAM,4CAAY,CAAC,MAAM;IAC9B;IACA,MAAM,SAAS,CAAC,yBAAyB,EAAE,KAAK,EAAE,EAAE,IAAI,MAAM,CAAC;IAC/D,SAAS,cAAc,QAAQ,sBAAsB,cAAc;IACnE,OAAO,WAAW,2CAAW;AAC/B;;;ADRO,MAAM,4CAAQ,OAAO,OAAO;IACjC,IAAI;QACF,MAAM,MAAM,MAAM,CAAA,GAAA,sCAAI,EAAE;YACtB,QAAQ;YACR,KAAK;YACL,MAAM;uBACJ;0BACA;YACF;QACF;QAEA,IAAI,IAAI,KAAK,WAAW,WAAW;YACjC,CAAA,GAAA,yCAAQ,EAAE,WAAW;YACrB,OAAO,WAAW;gBAChB,SAAS,OAAO;YAClB,GAAG;QACL;IACF,EAAE,OAAO,KAAK;QACZ,CAAA,GAAA,yCAAQ,EAAE,SAAS,IAAI,SAAS,KAAK;IACvC;AACF;;;AFpBA,eAAe;AACf,MAAM,+BAAS,SAAS,eAAe;AACvC,MAAM,kCAAY,SAAS,eAAe;AAE1C,aAAa;AACb,IAAI,8BAAQ;IACV,MAAM,YAAY,KAAK,MAAM,QAAQ;IACrC,CAAA,GAAA,yCAAS,EAAE;AACb;AAEA,IAAI,iCACF,gCAAU,iBAAiB,UAAU,CAAC;IACpC,EAAE;IACF,MAAM,QAAQ,SAAS,eAAe,SAAS;IAC/C,MAAM,WAAW,SAAS,eAAe,YAAY;IACrD,CAAA,GAAA,yCAAI,EAAE,OAAO;AACf","sources":["public/js/index.js","public/js/mapbox.js","public/js/login.js","public/js/alerts.js"],"sourcesContent":["/* eslint-disable */\r\nimport { displayMap } from './mapbox';\r\nimport { login } from './login';\r\n\r\n// DOM ELEMENTS\r\nconst mapBox = document.getElementById('map');\r\nconst loginForm = document.getElementById('.form');\r\n\r\n// DELEGATION\r\nif (mapBox) {\r\n  const locations = JSON.parse(dataset.locations);\r\n  displayMap(locations);\r\n}\r\n\r\nif (loginForm)\r\n  loginForm.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    const email = document.getElementById('email').value;\r\n    const password = document.getElementById('password').value;\r\n    login(email, password);\r\n  });\r\n","/* eslint-disable */\r\n\r\nexport const displayMap = (locations) => {\r\n  mapboxgl.accessToken =\r\n    'pk.eyJ1IjoiY256IiwiYSI6ImNsamI5b210NzA4b3czanJ5Z2VzOWpxajAifQ.YmI-mzPpeFfFNklyJjSSyg';\r\n\r\n  var map = new mapboxgl.Map({\r\n    container: 'map',\r\n    style: 'mapbox://styles/cnz/cljbaxkxk002j01nrh7o34h5z',\r\n    scrollZoom: false,\r\n    // center: [-118.113491, 34.111745],\r\n    // zoom: 10,\r\n    // interactive: false,\r\n  });\r\n\r\n  const bounds = new mapboxgl.LngLatBounds();\r\n\r\n  locations.forEach((loc) => {\r\n    // Create marker\r\n    const el = document.createElement('div');\r\n    el.className = 'marker';\r\n\r\n    // Add marker\r\n    new mapboxgl.Marker({\r\n      element: el,\r\n      anchor: 'bottom',\r\n    })\r\n      .setLngLat(loc.coordinates)\r\n      .addTo(map);\r\n\r\n    // Add popup\r\n    new mapboxgl.Popup({\r\n      offset: 30,\r\n    })\r\n      .setLngLat(loc.coordinates)\r\n      .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\r\n      .addTo(map);\r\n\r\n    // Extend map bounds to include current location\r\n    bounds.extend(loc.coordinates);\r\n  });\r\n\r\n  map.fitBounds(bounds, {\r\n    padding: {\r\n      top: 200,\r\n      bottom: 150,\r\n      left: 200,\r\n      right: 200,\r\n    },\r\n  });\r\n};\r\n","/* eslint-disable */\r\nimport axios from 'axios';\r\nimport { showAlert } from './alerts';\r\n\r\nexport const login = async (email, password) => {\r\n  try {\r\n    const res = await axios({\r\n      method: 'POST',\r\n      url: 'http://127.0.0.1:3000/api/v1/users/login',\r\n      data: {\r\n        email,\r\n        password,\r\n      },\r\n    });\r\n\r\n    if (res.data.status === 'success') {\r\n      showAlert('success', 'Logged in successfully!');\r\n      window.setTimeout(() => {\r\n        location.assign('/');\r\n      }, 1500);\r\n    }\r\n  } catch (err) {\r\n    showAlert('error', err.response.data.message);\r\n  }\r\n};\r\n","/* eslint-disable */\r\nexport const hideAlert = () => {\r\n  const el = document.querySelector('.alert');\r\n  if (el) el.parentElement.removeChild(el);\r\n};\r\n\r\n// type is 'success' or 'error'\r\nexport const showAlert = (type, msg) => {\r\n  hideAlert();\r\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n  document.querySelector('body').insertAdjacentElement('afterbegin', markup);\r\n  window.setTimeout(hideAlert, 5000);\r\n};\r\n"],"names":[],"version":3,"file":"app.js.map","sourceRoot":"/"}